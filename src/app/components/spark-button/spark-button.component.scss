$spot-count: 52;

:host {
  display: inline-flex;
  cursor: pointer;
}

.spark-btn {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 18px 26px;
  min-width: 180px;
  min-height: 64px;
  border-radius: 999px;
  background: linear-gradient(135deg, #ff1f4a 0%, #ff4d6a 48%, #ff8a2a 100%);
  background-size: 200% 200%;
  color: #fff;
  border: 3px solid rgba(255, 255, 255, 1);
  box-shadow:
    0 16px 32px rgba(255, 55, 55, 0.32),
    0 0 0 1px rgba(255, 255, 255, 0.1);
  font-weight: 800;
  letter-spacing: 0.04em;
  text-decoration: none;
  overflow: visible;
  cursor: pointer;
  isolation: isolate;
  transition:
    transform 0.25s ease,
    box-shadow 0.35s ease,
    background-position 0.9s ease;
  background-position: 50% 28%;

  background-image: url('Sonne_Layer_mitte_scrolleffect.png');
  background-size: 1000px;
}

.spark-btn:hover {
  transform: translateY(-2px);
  box-shadow:
    0 20px 42px rgba(255, 63, 63, 0.45),
    0 0 0 1px rgba(255, 255, 255, 0.16);
  background-position: 50% 50%;
}

.spark-btn:focus-visible {
  outline: 2px solid #ffe0e0;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px rgba(255, 63, 63, 0.5);
}

.spark-btn__label {
  position: relative;
  z-index: 2;
  font-size: 20px;
}

.spark-btn__spots {
  position: absolute;
  inset: -22px;
  pointer-events: none;
  z-index: 1;
  filter: drop-shadow(0 6px 18px rgba(255, 255, 255, 0.16));
}

.spark-btn__spot {
  position: absolute;
  top: 50%;
  left: 50%;
  border-radius: 999px;
  opacity: 0.85;
  mix-blend-mode: screen;
  background: #ff6f6f;
  width: 6px;
  height: 6px;
  transform: translate(calc(-50% + var(--x-start, 0px)), calc(-50% + var(--y-start, 0px)))
    scale(0.9);
  animation: spark-move var(--duration, 6s) ease-in-out infinite;
  animation-delay: var(--delay, 0s);
  box-shadow: 0 0 10px rgba(255, 136, 136, 0.3);
}

@for $i from 1 through $spot-count {
  .spark-btn__spot:nth-child(#{$i}) {
    $size: random(4) + 3;
    width: #{$size}px;
    height: #{$size}px;
    --x-start: #{random(140) - 70}px;
    --y-start: #{random(120) - 60}px;
    --x-end: #{random(400) - 200}px;
    --y-end: #{random(160) - 80}px;
    --duration: #{(random(30) / 5) + 4}s;
    --delay: -#{random(20) / 10}s;
    background: hsla(5 + random(20), 85%, 66%, 0.9);
    box-shadow: 0 0 12px rgba(255, 120 + random(40), 120 + random(40), 0.26);
  }
}

@keyframes spark-move {
  0% {
    transform: translate(calc(-50% + var(--x-start, 0px)), calc(-50% + var(--y-start, 0px)))
      scale(0.85);
    opacity: 0.35;
  }

  50% {
    transform: translate(calc(-50% + var(--x-end, 0px)), calc(-50% + var(--y-end, 0px))) scale(1.25);
    opacity: 1;
  }

  100% {
    transform: translate(calc(-50% + var(--x-start, 0px)), calc(-50% + var(--y-start, 0px)))
      scale(0.85);
    opacity: 0.35;
  }
}
